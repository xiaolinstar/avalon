# 🏰 阿瓦隆 (Avalon) - 多人身份推理游戏

一款基于Web的多人在线身份推理游戏，支持5-10人同时游戏。

## 🎮 游戏特色

- **身份推理**: 正义与邪恶的终极对决
- **多人在线**: 支持5-10人同时在线游戏  
- **实时同步**: WebSocket实时状态同步
- **策略博弈**: 智慧与勇气的完美结合
- **任务挑战**: 完成神圣的任务使命

## 🚀 当前实现功能

### ✅ 用户系统
- **用户注册**: 支持邮箱注册新账户
- **用户登录**: 支持用户名/密码登录
- **用户信息展示**: 在所有页面显示当前登录用户信息
- **退出登录**: 支持用户安全退出
- **用户菜单**: 统一的用户菜单组件，包含用户名显示和退出选项

### ✅ 房间系统
- **创建房间**: 注册用户可以创建游戏房间
- **加入房间**: 通过房间号加入现有房间
- **房间管理**: 显示房间信息、玩家列表
- **准备状态**: 玩家可以标记准备状态
- **游戏开始**: 房主可以开始游戏

### ✅ 游戏系统
- **角色分配**: 自动分配正义和邪恶阵营角色
- **任务投票**: 队伍提议和全员投票
- **任务执行**: 任务成员投票决定任务结果
- **刺杀阶段**: 刺客可以刺杀梅林
- **游戏状态**: 实时显示游戏进度和结果

### ✅ 界面功能
- **响应式设计**: 支持桌面和移动设备
- **现代化UI**: 使用TailwindCSS和Shadcn/ui组件
- **实时通知**: 使用Sonner显示操作反馈
- **加载状态**: 统一的加载和错误处理

### ✅ 开发功能
- **多用户测试**: 支持本地多用户测试
- **API测试**: 内置API连接测试功能
- **Mock数据**: 完整的模拟数据系统
- **开发工具**: 热重载、代码检查等

## 🛠️ 技术栈

### 前端
- **框架**: React 18 + TypeScript
- **构建工具**: Vite
- **样式**: TailwindCSS + PostCSS
- **UI组件**: Shadcn/ui + Radix UI
- **状态管理**: Zustand
- **路由**: React Router v6
- **HTTP客户端**: Axios
- **通知**: Sonner

### 后端
- **框架**: Spring Boot 3 + Java 17
- **数据库**: PostgreSQL 15 + Redis 7
- **实时通信**: WebSocket + STOMP
- **认证**: Spring Security + JWT
- **构建工具**: Maven

## 🚦 快速开始

### 环境要求
- Node.js 18+
- Java 17+
- PostgreSQL 15+
- Redis 7+

### 安装依赖
```bash
# 前端依赖
cd frontend
pnpm install

# 后端依赖
cd ../
mvn install
```

### 启动服务
```bash
# 启动后端服务 (端口8080)
mvn spring-boot:run

# 启动前端服务 (端口3000)
cd frontend
pnpm dev
```

### 访问应用
- 前端: http://localhost:3000
- 后端API: http://localhost:8080
- API文档: http://localhost:8080/swagger-ui.html

## 📁 项目结构

```
avalon/
├── frontend/                 # React前端应用
│   ├── src/
│   │   ├── components/       # 可复用组件
│   │   ├── pages/           # 页面组件
│   │   ├── stores/          # 状态管理
│   │   ├── services/        # API服务
│   │   ├── types/           # TypeScript类型定义
│   │   ├── utils/           # 工具函数
│   │   └── lib/             # 配置和工具
│   └── public/              # 静态资源
├── src/                     # Spring Boot后端
│   └── main/
│       ├── java/            # Java源代码
│       └── resources/       # 配置文件
└── docs/                    # 项目文档
    ├── requirements/        # 产品需求文档
    ├── design/              # 技术设计文档
    ├── api/                 # API文档
    └── development/         # 开发指南和流程
```

## 🎯 使用说明

### 创建房间
1. 登录账户
2. 点击"开始游戏"
3. 选择游戏人数(5-10人)
4. 点击"创建房间"
5. 分享房间号给其他玩家

### 加入房间
1. 登录账户
2. 点击"开始游戏"
3. 输入房间号
4. 点击"加入房间"

### 开始游戏
1. 所有玩家加入房间
2. 所有玩家点击"准备"
3. 房主点击"开始游戏"
4. 查看角色身份并开始游戏

## 🔧 开发说明

### 多用户测试
应用内置了多用户测试功能，可以快速切换不同用户进行测试：
1. 登录任意账户
2. 在首页底部显示"测试面板"
3. 点击"显示测试面板"
4. 使用"快速切换用户"按钮切换不同用户
5. 在多个浏览器标签页中测试多用户交互

### API测试
首页提供了API连接测试功能：
1. 访问首页
2. 点击"API测试"按钮
3. 查看连接状态和响应数据

## 📋 开发计划

### 一期 (MVP) ✅
- [x] 用户注册登录
- [x] 房间创建加入
- [x] 基础游戏流程
- [x] 角色分配显示
- [x] 用户信息显示

### 二期 (增强功能)
- [ ] 游戏历史记录
- [ ] 个人中心
- [ ] 排行榜系统
- [ ] 游戏回放
- [ ] 语音聊天

### 三期 (高级功能)
- [ ] 观战模式
- [ ] 自定义角色
- [ ] 房间设置
- [ ] 好友系统
- [ ] 成就系统

## 🤝 贡献指南

1. Fork 项目
2. 创建特性分支 (`git checkout -b feature/amazing-feature`)
3. 提交更改 (`git commit -m 'Add some amazing feature'`)
4. 推送到分支 (`git push origin feature/amazing-feature`)
5. 创建 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 🆘 支持

如遇到问题，请：
1. 查看项目文档
2. 检查控制台错误信息
3. 提交 Issue 报告问题

---

**🏰 阿瓦隆 - 正义与邪恶的史诗对决**

